# RSS Reader - 仕様書

モノレポ構成の現代的な RSS リーダーアプリケーション。Web、Native（iOS/Android）対応。

## 機能

- ユーザー登録
- ログイン
- パスワードリセット
- パスワード変更
- メールアドレス変更
- カラーテーマ設定
- 言語設定
- フィード登録
- フィード一覧表示
- フィードの削除
- フィードの記事一覧表示
- 1日ごとにフィードの更新(Vercel Cron JobのHobbyプランの制約を考慮)
- OPMLのインポート/エクスポート
- 記事の検索機能

## ページ

- トップページ
- ユーザー登録ページ
- ログインページ
- パスワードリセットページ
- フィードページ
- フィード登録ページ
- アカウント・設定ページ

## アーキテクチャ

### モノレポ構成
- **apps/api**: Node.js/Express/Prisma API サーバー
- **apps/web**: Next.js ウェブアプリケーション  
- **apps/native**: React Native/Expo モバイルアプリ
- **packages/sdk**: TypeScript SDK（API クライアント）

### 技術スタック
- **フロントエンド**: React, TypeScript, Tailwind CSS, React Hook Form, Zod
- **バックエンド**: Node.js, Express, Prisma, PostgreSQL, JWT, bcryptjs
- **モバイル**: React Native, Expo
- **認証**: JWT ベース認証、レート制限、セキュリティヘッダー
- **ツール**: Turborepo, Biome, Vitest, Supertest

## デザイン/UI

- シンプルでフラットデザイン
- レスポンシブデザイン（モバイルファースト）
- ダークモード対応
- 多言語対応（日本語/英語）

## 各ページの構成

### トップページ

- ユーザー登録・ログインページへの誘導
- ユーザー登録・ログインページへのリンク
- 抽象的かつ幾何学的なヒーローセクション
- このアプリケーションの特徴を説明する

### ユーザー登録ページ

- Eメールとパスワードを入力して登録
- Eメールとパスワードのバリデーション
- ユーザー登録の成功・失敗時のメッセージ
- ログイン時には、フィードページへリダイレクト
- すでにアカウントを持っている場合のログインリンク

### ログインページ

- Eメールとパスワードを入力してログイン
- Eメールとパスワードのバリデーション
- ログインの成功・失敗時のメッセージ
- ログイン時には、フィードページへリダイレクト
- ユーザー登録ページへのリンク
- パスワードを忘れた場合のリンク

### パスワードリセットページ

- Eメールを入力してパスワードリセットのリンクを送信
- Eメールのバリデーション
- パスワードリセットの成功・失敗時のメッセージ
- パスワードリセットの成功時には、ユーザー登録・ログインページへリダイレクト

### フィードページ

- 情報量をできるだけ多く取るため最大幅を広く取る
- サイドカラム
  - フィードの登録
  - 全てフィードをリフレッシュ
  - 全ての記事
  - 登録したフィードの一覧(クリックしたらフィルターされる)
  - フィードの削除
- メインカラム
  - フィードの閲覧
  - フィードの登録
  - フィードの削除
  - コンパクトなリスト表示
  - Favicon/Iconを表示
  - 記事をクリックしたら、リンクを別タブで開く
  - 記事検索機能（タイトルと説明文を対象に検索）

### アカウント・設定ページ

- カラーテーマ設定(システム、ライト、ダーク)
- 言語設定(デフォルト言語は日本語。英語も選択可)
- ユーザー情報の表示
- パスワードの変更
- メールアドレスの変更
- ログアウト
- アカウントの削除
- OPMLのインポート
- OPMLのエクスポート

## 認証・セキュリティ仕様

### 認証方式
- **JWT ベース認証**: ステートレス、スケーラブル
- **トークン有効期限**: 24時間
- **セッション管理**: クライアントサイドでトークン管理

### パスワード仕様
- **最小要件**: 8文字以上、大文字・小文字・数字を含む
- **ハッシュ化**: bcryptjs (saltRounds: 12)
- **リセット機能**: メール経由、1時間有効期限

### セキュリティ対策
- **レート制限**: 
  - 一般API: 15分/100リクエスト
  - ログイン: 15分/10回
  - 登録: 1時間/5回
  - パスワードリセット: 1時間/3回
- **CORS**: 許可ドメインリスト管理
- **セキュリティヘッダー**: XSS防止、CSRF対策
- **入力検証**: Zod スキーマによる厳格な検証
- **エラーハンドリング**: 情報漏洩を防ぐ統一エラーレスポンス

### データ保護
- **個人情報**: メールアドレス、ハッシュ化パスワード
- **ユーザー設定**: テーマ、言語設定
- **データ削除**: アカウント削除時にカスケード削除
- **ログ管理**: 認証イベントのログ記録
